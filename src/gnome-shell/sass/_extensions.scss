@mixin fancy_dock {
  //Fancify the dash

  #dash StWidget {
    // for shadow transition (grow and fade in) effects
    transition-duration: 250ms;
  }

  .app-well-app {
    // get rid of default hover effects
    color: transparent;
    background-color: transparent;

    &:hover, &:focus, &:active {
      background-color: transparent;

      * {
        background-color: transparent;
        box-shadow: none;
      }
    }
  }

  @each $g in left right top bottom {
    @for $i from 1 through 4 {
      $_indicator_height: 5;
      $_shadow: null;

      @if $g == "left" {
        // if the dock is pinned to the left ☜(ﾟ∀ﾟ☜)
        $_shadow: inset #{$_indicator_height}px 0;
      }

      @if $g == "right" {
        // to the right (☞ﾟ∀ﾟ)☞
        $_shadow: inset -#{$_indicator_height}px 0;
      }

      @if $g == "bottom" {
        // now down ☟(˚▽˚)☟
        $_shadow: inset 0px -#{$_indicator_height}px;
      }

      @if $g == "top" {
        // and up ☝(˚▽˚)☝
        $_shadow: inset 0px #{$_indicator_height}px;
      }

      #dashtodockContainer.#{$g} {
        .dash-item-container {
          .app-well-app-running-dot {
            // get rid of the running dot
            background-color: transparent;
          }

          > StWidget.running#{$i} {
            // running items look like this
            background-color: transparentize($primary_color, 0.75);

            &:active, &.focused {
              // running and focused items look like this
              box-shadow: $_shadow $primary_color;
              background-color: transparentize($primary_color, 0.5);
            }

            &:hover {
              // hovering over a running item looks like this
              box-shadow: $_shadow $primary_color;
              background-color: transparentize($primary_color, 0.5);
            }
          }

          > StWidget {
            // unopened or regular items look like this (in most cases there should be no styling)

            background-color: rgba(0, 0, 0, 0.01);

            $_dash_hover_bg_color: if($transparency == "true", $alt_base_color, $inverse_bg_color);
            $_dash_hover_bg_color: if($variant == "light", transparentize($alt_primary_color, $secondary_opacity), $_dash_hover_bg_color);

            background-color: $_dash_hover_bg_color;

            &:hover, &:active {
              // hovering over an unopened item looks like this (should mirror the running item look from above imo)
              background-color: transparentize($primary_color, 0.75);
            }
          }
        }
      }
    }
  }
}

@mixin dash_bg {
  // the dash should never be white
  $_dash_color: if($transparency == "true", transparentize($ubuntu_black, $middle_opacity), $ubuntu_dark_grey);

  background: if($variant == "light" or $panel == "light", $ubuntu_dark_grey, $_dash_color);
}

@mixin ubuntu_launcher {
  .show-apps {
    .overview-icon {
      background-color: $launcher_background !important;
      background-image: url("assets/launcher.svg") !important;
      border-radius: $circular_radius;
      background-size: contain !important;
    }

    StWidget {
      // no border to get rid of a width problem otherwise
      border: none;
      color: transparent;
      box-shadow: none;
    }

    &:checked, &:hover, &:active {
      .overview-icon {
        background-image: url("assets/launcher.svg") !important;
        background-size: contain !important;
        background-color: darken($launcher_background, 7.5) !important;

        StWidget {
          color: transparent;
        }
      }
    }
  }

  #dashtodockContainer.extended {
    & .overview-icon {
      border-radius: 0;
      background-color: transparent !important;
    }

    & .show-apps {
      background-color: $launcher_background !important;

      &:checked,
      &:focus,
      &:hover {
        background-color: darken($launcher_background, 7.5) !important;
      }
    }
  }
}

@mixin global_menu_padding {
  .applet-box {
    // imterim global menu support | creds to neowiz73 from omgubuntu! > honestly didn't think his suggestion would work
    .applet-menu-content {
      // they're popup-menu-items and the spacing should be consistent in this theme the spacing is 12px, we're dividing that by half
      spacing: 4px;
    }

    .popup-menu-item {
      // no padding just looks weird so we're going to use the remaining spacing to make the menu items themselves look nicer

      padding: 0 4px;
      color: if($panel == "light" or $variant == "light", $dark_fg_color, $light_fg_color);

      &:hover {
        // hover effect consistent with regular panel buttons
        color: if($panel == "light" or $variant == "light", transparentize($dark_fg_color, $lower_opacity), transparentize($fg_color, $lower_opacity));
      }

      &:active, &:focus, &:checked {
        // same as above
        background-color: rgba($bg_color, 0.01);
        box-shadow: inset 0 -2px 0px $primary_color;
        color: if($panel == "light" or $variant == "light", $primary_color, transparentize($fg_color, $lower_opacity));
      }
    }
  }
}

@mixin uniform_panel_spacing {
  // Makes spacing between indicators and the aggregate menu uniform

  #panelRight .panel-button {
    -natural-hpadding: 4px;
    -minimum-hpadding: 4px;
  }

  .panel-status-indicators-box,
  .panel-status-menu-box {
    spacing: 8px;
  }

  #panelLeft, #panelCenter {
    spacing: 4px;
  }
}

/* GPaste */
.popup-menu {
  .search-entry {
    color: $fg_color;
    selection-background-color: transparentize($alt_primary_color, $middle_opacity);
    selected-color: $fg_color;

    @include entry(normal);

    &:focus {
      @include entry(focus);

      color: $fg_color;
    }

    .search-entry-icon {
      color: $tertiary_fg_color;
    }

    &:focus,
    &:hover {
      .search-entry-icon {
        color: $fg_color;
      }
    }
  }
}
